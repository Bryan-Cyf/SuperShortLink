"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_popper=_interopRequireDefault(require("popper.js")),_utils=require("@material-ui/utils"),_styles=require("@material-ui/styles"),_Portal=_interopRequireDefault(require("../Portal")),_createChainedFunction=_interopRequireDefault(require("../utils/createChainedFunction")),_setRef=_interopRequireDefault(require("../utils/setRef")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef"));function flipPlacement(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function getAnchorEl(e){return"function"==typeof e?e():e}var useEnhancedEffect="undefined"!=typeof window?React.useLayoutEffect:React.useEffect,defaultPopperOptions={},Popper=React.forwardRef(function(e,t){var r=e.anchorEl,n=e.children,o=e.container,i=e.disablePortal,p=void 0!==i&&i,u=e.keepMounted,a=void 0!==u&&u,l=e.modifiers,s=e.open,c=e.placement,f=void 0===c?"bottom":c,i=e.popperOptions,d=void 0===i?defaultPopperOptions:i,u=e.popperRef,c=e.style,i=e.transition,_=void 0!==i&&i,e=(0,_objectWithoutProperties2.default)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),h=React.useRef(null),m=(0,_useForkRef.default)(h,t),y=React.useRef(null),R=(0,_useForkRef.default)(y,u),b=React.useRef(R);useEnhancedEffect(function(){b.current=R},[R]),React.useImperativeHandle(u,function(){return y.current},[]);var t=React.useState(!0),u=t[0],T=t[1],E=flipPlacement(f,(0,_styles.useTheme)()),t=React.useState(E),f=t[0],v=t[1];React.useEffect(function(){y.current&&y.current.update()});function q(){y.current&&(y.current.destroy(),b.current(null))}var P=React.useCallback(function(){var e,t;h.current&&r&&s&&(y.current&&(y.current.destroy(),b.current(null)),t=function(e){v(e.placement)},e=getAnchorEl(r),"production"!==process.env.NODE_ENV&&e&&1===e.nodeType&&(e=e.getBoundingClientRect(),"test"!==process.env.NODE_ENV&&0===e.top&&0===e.left&&0===e.right&&0===e.bottom&&console.warn(["Material-UI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))),t=new _popper.default(getAnchorEl(r),h.current,(0,_extends2.default)({placement:E},d,{modifiers:(0,_extends2.default)({},p?{}:{preventOverflow:{boundariesElement:"window"}},l,d.modifiers),onCreate:(0,_createChainedFunction.default)(t,d.onCreate),onUpdate:(0,_createChainedFunction.default)(t,d.onUpdate)})),b.current(t))},[r,p,l,s,E,d]),t=React.useCallback(function(e){(0,_setRef.default)(m,e),P()},[m,P]);if(React.useEffect(function(){return function(){q()}},[]),React.useEffect(function(){s||_||q()},[s,_]),!a&&!s&&(!_||u))return null;f={placement:f};return _&&(f.TransitionProps={in:s,onEnter:function(){T(!1)},onExited:function(){T(!0),q()}}),React.createElement(_Portal.default,{disablePortal:p,container:o},React.createElement("div",(0,_extends2.default)({ref:t,role:"tooltip"},e,{style:(0,_extends2.default)({position:"fixed",top:0,left:0,display:s||!a||_?null:"none"},c)}),"function"==typeof n?n(f):n))});"production"!==process.env.NODE_ENV&&(Popper.propTypes={anchorEl:(0,_utils.chainPropTypes)(_propTypes.default.oneOfType([_utils.HTMLElementType,_propTypes.default.object,_propTypes.default.func]),function(e){if(e.open){var t=getAnchorEl(e.anchorEl);if(t&&1===t.nodeType){e=t.getBoundingClientRect();if("test"!==process.env.NODE_ENV&&0===e.top&&0===e.left&&0===e.right&&0===e.bottom)return new Error(["Material-UI: The `anchorEl` prop provided to the component is invalid.","The anchor element should be part of the document layout.","Make sure the element is present in the document or that it's not display none."].join("\n"))}else if(!t||"number"!=typeof t.clientWidth||"number"!=typeof t.clientHeight||"function"!=typeof t.getBoundingClientRect)return new Error(["Material-UI: The `anchorEl` prop provided to the component is invalid.","It should be an HTML element instance or a referenceObject ","(https://popper.js.org/docs/v1/#referenceObject)."].join("\n"))}return null}),children:_propTypes.default.oneOfType([_propTypes.default.node,_propTypes.default.func]).isRequired,container:_propTypes.default.oneOfType([_utils.HTMLElementType,_propTypes.default.instanceOf(React.Component),_propTypes.default.func]),disablePortal:_propTypes.default.bool,keepMounted:_propTypes.default.bool,modifiers:_propTypes.default.object,open:_propTypes.default.bool.isRequired,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),popperOptions:_propTypes.default.object,popperRef:_utils.refType,style:_propTypes.default.object,transition:_propTypes.default.bool});var _default=Popper;exports.default=_default;