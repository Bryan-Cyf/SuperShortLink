"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_colorManipulator=require("../styles/colorManipulator"),_useIsFocusVisible2=_interopRequireDefault(require("../utils/useIsFocusVisible")),_ownerDocument=_interopRequireDefault(require("../utils/ownerDocument")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_useControlled3=_interopRequireDefault(require("../utils/useControlled")),_ValueLabel=_interopRequireDefault(require("./ValueLabel"));function asc(e,t){return e-t}function clamp(e,t,a){return Math.min(Math.max(t,e),a)}function findClosest(e,r){return e.reduce(function(e,t,a){t=Math.abs(r-t);return null===e||t<e.distance||t===e.distance?{distance:t,index:a}:e},null).index}function trackFinger(e,t){if(void 0!==t.current&&e.changedTouches){for(var a=0;a<e.changedTouches.length;a+=1){var r=e.changedTouches[a];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function valueToPercent(e,t,a){return 100*(e-t)/(a-t)}function percentToValue(e,t,a){return(a-t)*e+t}function getDecimalPrecision(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),a=t[0].split(".")[1];return(a?a.length:0)+parseInt(t[1],10)}e=e.toString().split(".")[1];return e?e.length:0}function roundValueToStep(e,t,a){a=Math.round((e-a)/t)*t+a;return Number(a.toFixed(getDecimalPrecision(t)))}function setValueIndex(e){var t=e.values,a=e.source,r=e.newValue,e=e.index;if(t[e]===r)return a;t=t.slice();return t[e]=r,t}function focusThumb(e){var t=e.sliderRef,a=e.activeIndex,e=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===a||t.current.querySelector('[role="slider"][data-index="'.concat(a,'"]')).focus(),e&&e(a)}var axisProps={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Identity=function(e){return e},styles=function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?(0,_colorManipulator.lighten)(e.palette.primary.main,.62):(0,_colorManipulator.darken)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,_colorManipulator.alpha)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,_colorManipulator.alpha)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,_colorManipulator.alpha)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,_colorManipulator.alpha)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:(0,_extends2.default)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}};exports.styles=styles;var Slider=React.forwardRef(function(e,t){var r=e["aria-label"],n=e["aria-labelledby"],o=e["aria-valuetext"],l=e.classes,a=e.className,i=e.color,u=void 0===i?"primary":i,s=e.component,c=void 0===s?"span":s,p=e.defaultValue,d=e.disabled,f=void 0!==d&&d,m=e.getAriaLabel,v=e.getAriaValueText,b=e.marks,h=void 0!==b&&b,i=e.max,y=void 0===i?100:i,s=e.min,_=void 0===s?0:s,d=e.name,x=e.onChange,g=e.onChangeCommitted,T=e.onMouseDown,b=e.orientation,k=void 0===b?"horizontal":b,i=e.scale,R=void 0===i?Identity:i,s=e.step,w=void 0===s?1:s,b=e.ThumbComponent,C=void 0===b?"span":b,i=e.track,L=void 0===i?"normal":i,s=e.value,b=e.ValueLabelComponent,E=void 0===b?_ValueLabel.default:b,i=e.valueLabelDisplay,q=void 0===i?"off":i,b=e.valueLabelFormat,A=void 0===b?Identity:b,i=(0,_objectWithoutProperties2.default)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),b=(0,_useTheme.default)(),V=React.useRef(),e=React.useState(-1),D=e[0],S=e[1],e=React.useState(-1),I=e[0],M=e[1],p=(0,_useControlled3.default)({controlled:s,default:p,name:"Slider"}),p=(0,_slicedToArray2.default)(p,2),F=p[0],P=p[1],O=Array.isArray(F),$=($=O?F.slice().sort(asc):[F]).map(function(e){return clamp(e,_,y)}),N=!0===h&&null!==w?(0,_toConsumableArray2.default)(Array(Math.floor((y-_)/w)+1)).map(function(e,t){return{value:_+w*t}}):h||[],p=(0,_useIsFocusVisible2.default)(),z=p.isFocusVisible,j=p.onBlurVisible,h=p.ref,p=React.useState(-1),B=p[0],W=p[1],Y=React.useRef(),p=(0,_useForkRef.default)(h,Y),h=(0,_useForkRef.default)(t,p),U=(0,_useEventCallback.default)(function(e){var t=Number(e.currentTarget.getAttribute("data-index"));z(e)&&W(t),M(t)}),X=(0,_useEventCallback.default)(function(){-1!==B&&(W(-1),j()),M(-1)}),H=(0,_useEventCallback.default)(function(e){e=Number(e.currentTarget.getAttribute("data-index"));M(e)}),K=(0,_useEventCallback.default)(function(){M(-1)}),G="rtl"===b.direction,J=(0,_useEventCallback.default)(function(e){var t,a,r=Number(e.currentTarget.getAttribute("data-index")),n=$[r],o=(y-_)/10,l=N.map(function(e){return e.value}),i=l.indexOf(n);switch(e.key){case"Home":a=_;break;case"End":a=y;break;case"PageUp":w&&(a=n+o);break;case"PageDown":w&&(a=n-o);break;case G?"ArrowLeft":"ArrowRight":case"ArrowUp":a=w?n+w:l[i+1]||l[l.length-1];break;case G?"ArrowRight":"ArrowLeft":case"ArrowDown":a=w?n-w:l[i-1]||l[0];break;default:return}e.preventDefault(),a=clamp(a=w?roundValueToStep(a,w,_):a,_,y),O&&(a=setValueIndex({values:$,source:F,newValue:t=a,index:r}).sort(asc),focusThumb({sliderRef:Y,activeIndex:a.indexOf(t)})),P(a),W(r),x&&x(e,a),g&&g(e,a)}),Q=React.useRef(),Z=k;G&&"vertical"!==k&&(Z+="-reverse");function ee(e){var t=e.finger,a=void 0!==(l=e.move)&&l,r=e.values,n=e.source,o=(i=Y.current.getBoundingClientRect()).width,l=i.height,e=i.bottom,i=i.left,o=0===Z.indexOf("vertical")?(e-t.y)/l:(t.x-i)/o;o=percentToValue(o=-1!==Z.indexOf("-reverse")?1-o:o,_,y),o=clamp(o=w?roundValueToStep(o,w,_):(u=N.map(function(e){return e.value}))[findClosest(u,o)],_,y);var u=0;return O&&(u=(o=setValueIndex({values:r,source:n,newValue:n=o,index:u=a?Q.current:findClosest(r,o)}).sort(asc)).indexOf(n),Q.current=u),{newValue:o,activeIndex:u}}var te=(0,_useEventCallback.default)(function(e){var t,a=trackFinger(e,V);a&&(a=(t=ee({finger:a,move:!0,values:$,source:F})).newValue,t=t.activeIndex,focusThumb({sliderRef:Y,activeIndex:t,setActive:S}),P(a),x&&x(e,a))}),ae=(0,_useEventCallback.default)(function(e){var t=trackFinger(e,V);t&&(t=ee({finger:t,values:$,source:F}).newValue,S(-1),"touchend"===e.type&&M(-1),g&&g(e,t),(t=(V.current=void 0,_ownerDocument.default)(Y.current)).removeEventListener("mousemove",te),t.removeEventListener("mouseup",ae),t.removeEventListener("touchmove",te),t.removeEventListener("touchend",ae))}),re=(0,_useEventCallback.default)(function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(V.current=t.identifier);var a=trackFinger(e,V),t=ee({finger:a,values:$,source:F}),a=t.newValue,t=t.activeIndex;focusThumb({sliderRef:Y,activeIndex:t,setActive:S}),P(a),x&&x(e,a);a=(0,_ownerDocument.default)(Y.current);a.addEventListener("touchmove",te),a.addEventListener("touchend",ae)});React.useEffect(function(){var e=Y.current;e.addEventListener("touchstart",re);var t=(0,_ownerDocument.default)(e);return function(){e.removeEventListener("touchstart",re),t.removeEventListener("mousemove",te),t.removeEventListener("mouseup",ae),t.removeEventListener("touchmove",te),t.removeEventListener("touchend",ae)}},[ae,te,re]);t=(0,_useEventCallback.default)(function(e){T&&T(e),e.preventDefault();var t=trackFinger(e,V),a=ee({finger:t,values:$,source:F}),t=a.newValue,a=a.activeIndex;focusThumb({sliderRef:Y,activeIndex:a,setActive:S}),P(t),x&&x(e,t);t=(0,_ownerDocument.default)(Y.current);t.addEventListener("mousemove",te),t.addEventListener("mouseup",ae)}),p=valueToPercent(O?$[0]:_,_,y),b=valueToPercent($[$.length-1],_,y)-p,b=(0,_extends2.default)({},axisProps[Z].offset(p),axisProps[Z].leap(b));return React.createElement(c,(0,_extends2.default)({ref:h,className:(0,_clsx.default)(l.root,l["color".concat((0,_capitalize.default)(u))],a,f&&l.disabled,0<N.length&&N.some(function(e){return e.label})&&l.marked,!1===L&&l.trackFalse,"vertical"===k&&l.vertical,"inverted"===L&&l.trackInverted),onMouseDown:t},i),React.createElement("span",{className:l.rail}),React.createElement("span",{className:l.track,style:b}),React.createElement("input",{value:$.join(","),name:d,type:"hidden"}),N.map(function(e,t){var a=valueToPercent(e.value,_,y),r=axisProps[Z].offset(a),a=!1===L?-1!==$.indexOf(e.value):"normal"===L&&(O?e.value>=$[0]&&e.value<=$[$.length-1]:e.value<=$[0])||"inverted"===L&&(O?e.value<=$[0]||e.value>=$[$.length-1]:e.value>=$[0]);return React.createElement(React.Fragment,{key:e.value},React.createElement("span",{style:r,"data-index":t,className:(0,_clsx.default)(l.mark,a&&l.markActive)}),null!=e.label?React.createElement("span",{"aria-hidden":!0,"data-index":t,style:r,className:(0,_clsx.default)(l.markLabel,a&&l.markLabelActive)},e.label):null)}),$.map(function(e,t){var a=valueToPercent(e,_,y),a=axisProps[Z].offset(a);return React.createElement(E,{key:t,valueLabelFormat:A,valueLabelDisplay:q,className:l.valueLabel,value:"function"==typeof A?A(R(e),t):A,index:t,open:I===t||D===t||"on"===q,disabled:f},React.createElement(C,{className:(0,_clsx.default)(l.thumb,l["thumbColor".concat((0,_capitalize.default)(u))],D===t&&l.active,f&&l.disabled,B===t&&l.focusVisible),tabIndex:f?null:0,role:"slider",style:a,"data-index":t,"aria-label":m?m(t):r,"aria-labelledby":n,"aria-orientation":k,"aria-valuemax":R(y),"aria-valuemin":R(_),"aria-valuenow":R(e),"aria-valuetext":v?v(R(e),t):o,onKeyDown:J,onFocus:U,onBlur:X,onMouseOver:H,onMouseLeave:K}))}))});"production"!==process.env.NODE_ENV&&(Slider.propTypes={"aria-label":(0,_utils.chainPropTypes)(_propTypes.default.string,function(e){return Array.isArray(e.value||e.defaultValue)&&null!=e["aria-label"]?new Error("Material-UI: You need to use the `getAriaLabel` prop instead of `aria-label` when using a range slider."):null}),"aria-labelledby":_propTypes.default.string,"aria-valuetext":(0,_utils.chainPropTypes)(_propTypes.default.string,function(e){return Array.isArray(e.value||e.defaultValue)&&null!=e["aria-valuetext"]?new Error("Material-UI: You need to use the `getAriaValueText` prop instead of `aria-valuetext` when using a range slider."):null}),classes:_propTypes.default.object.isRequired,className:_propTypes.default.string,color:_propTypes.default.oneOf(["primary","secondary"]),component:_propTypes.default.elementType,defaultValue:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.arrayOf(_propTypes.default.number)]),disabled:_propTypes.default.bool,getAriaLabel:_propTypes.default.func,getAriaValueText:_propTypes.default.func,marks:_propTypes.default.oneOfType([_propTypes.default.bool,_propTypes.default.array]),max:_propTypes.default.number,min:_propTypes.default.number,name:_propTypes.default.string,onChange:_propTypes.default.func,onChangeCommitted:_propTypes.default.func,onMouseDown:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),scale:_propTypes.default.func,step:_propTypes.default.number,ThumbComponent:_propTypes.default.elementType,track:_propTypes.default.oneOf(["normal",!1,"inverted"]),value:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.arrayOf(_propTypes.default.number)]),ValueLabelComponent:_propTypes.default.elementType,valueLabelDisplay:_propTypes.default.oneOf(["on","auto","off"]),valueLabelFormat:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.func])});var _default=(0,_withStyles.default)(styles,{name:"MuiSlider"})(Slider);exports.default=_default;