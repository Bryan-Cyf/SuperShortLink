"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_Popover=_interopRequireDefault(require("../Popover")),_MenuList=_interopRequireDefault(require("../MenuList")),ReactDOM=_interopRequireWildcard(require("react-dom")),_setRef=_interopRequireDefault(require("../utils/setRef")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_deprecatedPropType=_interopRequireDefault(require("../utils/deprecatedPropType")),RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},styles={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}};exports.styles=styles;var Menu=React.forwardRef(function(e,t){var r=e.autoFocus,o=void 0===r||r,p=e.children,n=e.classes,s=e.disableAutoFocusItem,a=void 0!==s&&s,i=e.MenuListProps,u=void 0===i?{}:i,l=e.onClose,d=e.onEntering,c=e.open,f=e.PaperProps,_=void 0===f?{}:f,r=e.PopoverClasses,s=e.transitionDuration,i=void 0===s?"auto":s,f=e.TransitionProps,T=(f=void 0===f?{}:f).onEntering,s=(0,_objectWithoutProperties2.default)(f,["onEntering"]),f=e.variant,y=void 0===f?"selectedMenu":f,f=(0,_objectWithoutProperties2.default)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),R=(0,_useTheme.default)(),e=o&&!a&&c,P=React.useRef(null),h=React.useRef(null),m=-1;React.Children.map(p,function(e,t){React.isValidElement(e)&&("production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Menu component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n")),e.props.disabled||("menu"!==y&&e.props.selected||-1===m)&&(m=t))});p=React.Children.map(p,function(t,e){return e===m?React.cloneElement(t,{ref:function(e){h.current=ReactDOM.findDOMNode(e),(0,_setRef.default)(t.ref,e)}}):t});return React.createElement(_Popover.default,(0,_extends2.default)({getContentAnchorEl:function(){return h.current},classes:r,onClose:l,TransitionProps:(0,_extends2.default)({onEntering:function(e,t){P.current&&P.current.adjustStyleForScrollbar(e,R),d&&d(e,t),T&&T(e,t)}},s),anchorOrigin:"rtl"===R.direction?RTL_ORIGIN:LTR_ORIGIN,transformOrigin:"rtl"===R.direction?RTL_ORIGIN:LTR_ORIGIN,PaperProps:(0,_extends2.default)({},_,{classes:(0,_extends2.default)({},_.classes,{root:n.paper})}),open:c,ref:t,transitionDuration:i},f),React.createElement(_MenuList.default,(0,_extends2.default)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),l&&l(e,"tabKeyDown"))},actions:P,autoFocus:o&&(-1===m||a),autoFocusItem:e,variant:y},u,{className:(0,_clsx.default)(n.list,u.className)}),p))});"production"!==process.env.NODE_ENV&&(Menu.propTypes={anchorEl:_propTypes.default.oneOfType([_utils.HTMLElementType,_propTypes.default.func]),autoFocus:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object,disableAutoFocusItem:_propTypes.default.bool,MenuListProps:_propTypes.default.object,onClose:_propTypes.default.func,onEnter:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),onEntered:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),onEntering:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),onExit:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),onExited:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),onExiting:(0,_deprecatedPropType.default)(_propTypes.default.func,"Use the `TransitionProps` prop instead."),open:_propTypes.default.bool.isRequired,PaperProps:_propTypes.default.object,PopoverClasses:_propTypes.default.object,transitionDuration:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})]),TransitionProps:_propTypes.default.object,variant:_propTypes.default.oneOf(["menu","selectedMenu"])});var _default=(0,_withStyles.default)(styles,{name:"MuiMenu"})(Menu);exports.default=_default;