"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var React=_interopRequireWildcard(require("react")),ReactDOM=_interopRequireWildcard(require("react-dom")),_propTypes=_interopRequireDefault(require("prop-types")),_ownerDocument=_interopRequireDefault(require("../utils/ownerDocument")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_utils=require("@material-ui/utils");function mapEventPropToEvent(e){return e.substring(2).toLowerCase()}function clickedRootScrollbar(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}function ClickAwayListener(e){var n=e.children,t=e.disableReactTree,r=void 0!==t&&t,t=e.mouseEvent,u=void 0===t?"onClick":t,o=e.onClickAway,t=e.touchEvent,c=void 0===t?"onTouchEnd":t,i=React.useRef(!1),a=React.useRef(null),l=React.useRef(!1),s=React.useRef(!1);React.useEffect(function(){return setTimeout(function(){l.current=!0},0),function(){l.current=!1}},[]);var e=React.useCallback(function(e){a.current=ReactDOM.findDOMNode(e)},[]),t=(0,_useForkRef.default)(n.ref,e),p=(0,_useEventCallback.default)(function(e){var t=s.current;s.current=!1,l.current&&a.current&&!clickedRootScrollbar(e)&&(i.current?i.current=!1:(e.composedPath?-1<e.composedPath().indexOf(a.current):!(0,_ownerDocument.default)(a.current).documentElement.contains(e.target)||a.current.contains(e.target))||!r&&t||o(e))}),e=function(r){return function(e){s.current=!0;var t=n.props[r];t&&t(e)}},t={ref:t};return!1!==c&&(t[c]=e(c)),React.useEffect(function(){if(!1!==c){var e=mapEventPropToEvent(c),t=(0,_ownerDocument.default)(a.current),r=function(){i.current=!0};return t.addEventListener(e,p),t.addEventListener("touchmove",r),function(){t.removeEventListener(e,p),t.removeEventListener("touchmove",r)}}},[p,c]),!1!==u&&(t[u]=e(u)),React.useEffect(function(){if(!1!==u){var e=mapEventPropToEvent(u),t=(0,_ownerDocument.default)(a.current);return t.addEventListener(e,p),function(){t.removeEventListener(e,p)}}},[p,u]),React.createElement(React.Fragment,null,React.cloneElement(n,t))}"production"!==process.env.NODE_ENV&&(ClickAwayListener.propTypes={children:_utils.elementAcceptingRef.isRequired,disableReactTree:_propTypes.default.bool,mouseEvent:_propTypes.default.oneOf(["onClick","onMouseDown","onMouseUp",!1]),onClickAway:_propTypes.default.func.isRequired,touchEvent:_propTypes.default.oneOf(["onTouchEnd","onTouchStart",!1])}),"production"!==process.env.NODE_ENV&&(ClickAwayListener.propTypes=(0,_utils.exactProp)(ClickAwayListener.propTypes));var _default=ClickAwayListener;exports.default=_default;