import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import*as React from"react";import*as ReactDOM from"react-dom";import PropTypes from"prop-types";import clsx from"clsx";import{deepmerge,elementAcceptingRef}from"@material-ui/utils";import{alpha}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useForkRef from"../utils/useForkRef";import useId from"../utils/unstable_useId";import setRef from"../utils/setRef";import useIsFocusVisible from"../utils/useIsFocusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:alpha(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(round(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:_defineProperty({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:_defineProperty({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:_defineProperty({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:_defineProperty({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}},hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}var Tooltip=React.forwardRef(function(e,t){var o,r=e.arrow,n=void 0!==r&&r,i=e.children,s=e.classes,a=e.disableFocusListener,p=void 0!==a&&a,l=e.disableHoverListener,c=void 0!==l&&l,u=e.disableTouchListener,m=void 0!==u&&u,d=e.enterDelay,f=void 0===d?100:d,h=e.enterNextDelay,T=void 0===h?0:h,y=e.enterTouchDelay,b=void 0===y?700:y,g=e.id,r=e.interactive,a=void 0!==r&&r,l=e.leaveDelay,v=void 0===l?0:l,u=e.leaveTouchDelay,R=void 0===u?1500:u,P=e.onClose,x=e.onOpen,d=e.open,h=e.placement,y=void 0===h?"bottom":h,r=e.PopperComponent,l=void 0===r?Popper:r,w=e.PopperProps,O=e.title,u=e.TransitionComponent,D=void 0===u?Grow:u,E=e.TransitionProps,h=_objectWithoutProperties(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),F=useTheme(),r=React.useState(),L=r[0],M=r[1],u=React.useState(null),N=u[0],C=u[1],_=React.useRef(!1),k=React.useRef(),S=React.useRef(),A=React.useRef(),I=React.useRef(),e=useControlled({controlled:d,default:!1,name:"Tooltip",state:"open"}),r=_slicedToArray(e,2),u=r[0],B=r[1],e=u;"production"!==process.env.NODE_ENV&&(o=React.useRef(void 0!==d).current,React.useEffect(function(){L&&L.disabled&&!o&&""!==O&&"button"===L.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[O,L,o]));r=useId(g);React.useEffect(function(){return function(){clearTimeout(k.current),clearTimeout(S.current),clearTimeout(A.current),clearTimeout(I.current)}},[]);function W(){var o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return function(e){var t=i.props;"mouseover"===e.type&&t.onMouseOver&&o&&t.onMouseOver(e),_.current&&"touchstart"!==e.type||(L&&L.removeAttribute("title"),clearTimeout(S.current),clearTimeout(A.current),f||hystersisOpen&&T?(e.persist(),S.current=setTimeout(function(){V(e)},hystersisOpen?T:f)):V(e))}}function j(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},800+v),B(!1),P&&P(e),clearTimeout(k.current),k.current=setTimeout(function(){_.current=!1},F.transitions.duration.shortest)}function z(e){_.current=!0;var t=i.props;t.onTouchStart&&t.onTouchStart(e)}var V=function(e){clearTimeout(hystersisTimer),B(hystersisOpen=!0),x&&x(e)},u=useIsFocusVisible(),G=u.isFocusVisible,H=u.onBlurVisible,d=u.ref,g=React.useState(!1),$=g[0],q=g[1],u=function(){var o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return function(e){L||M(e.currentTarget),G(e)&&(q(!0),W()(e));var t=i.props;t.onFocus&&o&&t.onFocus(e)}},g=function(){var o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return function(e){var t=i.props;"blur"===e.type&&(t.onBlur&&o&&t.onBlur(e),$&&(q(!1),H())),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===L&&t.onMouseLeave(e),clearTimeout(S.current),clearTimeout(A.current),e.persist(),A.current=setTimeout(function(){j(e)},v)}},t=useForkRef(M,t),U=useForkRef(d,t),d=React.useCallback(function(e){setRef(U,ReactDOM.findDOMNode(e))},[U]),t=useForkRef(i.ref,d),d=!(e=""===O?!1:e)&&!c,h=_extends({"aria-describedby":e?r:null,title:d&&"string"==typeof O?O:null},h,i.props,{className:clsx(h.className,i.props.className),onTouchStart:z,ref:t}),t={};m||(h.onTouchStart=function(e){z(e),clearTimeout(A.current),clearTimeout(k.current),clearTimeout(I.current),e.persist(),I.current=setTimeout(function(){W()(e)},b)},h.onTouchEnd=function(e){i.props.onTouchEnd&&i.props.onTouchEnd(e),clearTimeout(I.current),clearTimeout(A.current),e.persist(),A.current=setTimeout(function(){j(e)},R)}),c||(h.onMouseOver=W(),h.onMouseLeave=g(),a&&(t.onMouseOver=W(!1),t.onMouseLeave=g(!1))),p||(h.onFocus=u(),h.onBlur=g(),a&&(t.onFocus=u(!1),t.onBlur=g(!1))),"production"!==process.env.NODE_ENV&&i.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(i.props.title,"` or the Tooltip component.")].join("\n"));g=React.useMemo(function(){return deepmerge({popperOptions:{modifiers:{arrow:{enabled:Boolean(N),element:N}}}},w)},[N,w]);return React.createElement(React.Fragment,null,React.cloneElement(i,h),React.createElement(l,_extends({className:clsx(s.popper,a&&s.popperInteractive,n&&s.popperArrow),placement:y,anchorEl:L,open:!!L&&e,id:h["aria-describedby"],transition:!0},t,g),function(e){var t=e.placement,e=e.TransitionProps;return React.createElement(D,_extends({timeout:F.transitions.duration.shorter},e,E),React.createElement("div",{className:clsx(s.tooltip,s["tooltipPlacement".concat(capitalize(t.split("-")[0]))],_.current&&s.touch,n&&s.tooltipArrow)},O,n?React.createElement("span",{className:s.arrow,ref:C}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object,className:PropTypes.string,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterNextDelay:PropTypes.number,enterTouchDelay:PropTypes.number,id:PropTypes.string,interactive:PropTypes.bool,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:PropTypes.elementType,PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip",flip:!1})(Tooltip);export{styles,testReset};