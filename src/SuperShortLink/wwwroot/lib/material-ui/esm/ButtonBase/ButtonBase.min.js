import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import PropTypes from"prop-types";import*as ReactDOM from"react-dom";import clsx from"clsx";import{elementTypeAcceptingRef,refType}from"@material-ui/utils";import useForkRef from"../utils/useForkRef";import useEventCallback from"../utils/useEventCallback";import deprecatedPropType from"../utils/deprecatedPropType";import withStyles from"../styles/withStyles";import useIsFocusVisible from"../utils/useIsFocusVisible";import TouchRipple from"./TouchRipple";var styles={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},ButtonBase=React.forwardRef(function(e,o){var t=e.action,n=e.buttonRef,r=e.centerRipple,s=void 0!==r&&r,p=e.children,u=e.classes,c=e.className,i=e.component,a=void 0===i?"button":i,l=e.disabled,f=void 0!==l&&l,d=e.disableRipple,b=void 0!==d&&d,y=e.disableTouchRipple,T=void 0!==y&&y,m=e.focusRipple,v=void 0!==m&&m,R=e.focusVisibleClassName,h=e.onBlur,P=e.onClick,g=e.onFocus,k=e.onFocusVisible,D=e.onKeyDown,E=e.onKeyUp,M=e.onMouseDown,x=e.onMouseLeave,C=e.onMouseUp,F=e.onTouchEnd,V=e.onTouchMove,B=e.onTouchStart,w=e.onDragLeave,N=e.tabIndex,S=void 0===N?0:N,I=e.TouchRippleProps,U=e.type,r=void 0===U?"button":U,i=_objectWithoutProperties(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),j=React.useRef(null);var K=React.useRef(null),l=React.useState(!1),L=l[0],O=l[1];f&&L&&O(!1);var d=useIsFocusVisible(),_=d.isFocusVisible,A=d.onBlurVisible,y=d.ref;function W(o,t,e){var n=2<arguments.length&&void 0!==e?e:T;return useEventCallback(function(e){return t&&t(e),!n&&K.current&&K.current[o](e),!0})}React.useImperativeHandle(t,function(){return{focusVisible:function(){O(!0),j.current.focus()}}},[]),React.useEffect(function(){L&&v&&!b&&K.current.pulsate()},[b,v,L]);function z(){var e=ReactDOM.findDOMNode(j.current);return a&&"button"!==a&&!("A"===e.tagName&&e.href)}var m=W("start",M),N=W("stop",w),U=W("stop",C),e=W("stop",function(e){L&&e.preventDefault(),x&&x(e)}),l=W("start",B),d=W("stop",F),t=W("stop",V),M=W("stop",function(e){L&&(A(e),O(!1)),h&&h(e)},!1),w=useEventCallback(function(e){j.current||(j.current=e.currentTarget),_(e)&&(O(!0),k&&k(e)),g&&g(e)}),H=React.useRef(!1),C=useEventCallback(function(e){v&&!H.current&&L&&K.current&&" "===e.key&&(H.current=!0,e.persist(),K.current.stop(e,function(){K.current.start(e)})),e.target===e.currentTarget&&z()&&" "===e.key&&e.preventDefault(),D&&D(e),e.target===e.currentTarget&&z()&&"Enter"===e.key&&!f&&(e.preventDefault(),P&&P(e))}),B=useEventCallback(function(e){v&&" "===e.key&&K.current&&L&&!e.defaultPrevented&&(H.current=!1,e.persist(),K.current.stop(e,function(){K.current.pulsate(e)})),E&&E(e),P&&e.target===e.currentTarget&&z()&&" "===e.key&&!e.defaultPrevented&&P(e)}),F=a,V={};"button"===(F="button"===F&&i.href?"a":F)?(V.type=r,V.disabled=f):("a"===F&&i.href||(V.role="button"),V["aria-disabled"]=f);var n=useForkRef(n,o),o=useForkRef(y,j),y=useForkRef(n,o),n=React.useState(!1),o=n[0],$=n[1];React.useEffect(function(){$(!0)},[]);var q=o&&!b&&!f;return"production"!==process.env.NODE_ENV&&React.useEffect(function(){q&&!K.current&&console.error(["Material-UI: The `component` prop provided to ButtonBase is invalid.","Please make sure the children prop is rendered in this custom component."].join("\n"))},[q]),React.createElement(F,_extends({className:clsx(u.root,c,L&&[u.focusVisible,R],f&&u.disabled),onBlur:M,onClick:P,onFocus:w,onKeyDown:C,onKeyUp:B,onMouseDown:m,onMouseLeave:e,onMouseUp:U,onDragLeave:N,onTouchEnd:d,onTouchMove:t,onTouchStart:l,ref:y,tabIndex:f?-1:S},V,i),p,q?React.createElement(TouchRipple,_extends({ref:K,center:s},I)):null)});"production"!==process.env.NODE_ENV&&(ButtonBase.propTypes={action:refType,buttonRef:deprecatedPropType(refType,"Use `ref` instead."),centerRipple:PropTypes.bool,children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,component:elementTypeAcceptingRef,disabled:PropTypes.bool,disableRipple:PropTypes.bool,disableTouchRipple:PropTypes.bool,focusRipple:PropTypes.bool,focusVisibleClassName:PropTypes.string,href:PropTypes.string,onBlur:PropTypes.func,onClick:PropTypes.func,onDragLeave:PropTypes.func,onFocus:PropTypes.func,onFocusVisible:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,onMouseDown:PropTypes.func,onMouseLeave:PropTypes.func,onMouseUp:PropTypes.func,onTouchEnd:PropTypes.func,onTouchMove:PropTypes.func,onTouchStart:PropTypes.func,tabIndex:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),TouchRippleProps:PropTypes.object,type:PropTypes.oneOfType([PropTypes.oneOf(["button","reset","submit"]),PropTypes.string])});export default withStyles(styles,{name:"MuiButtonBase"})(ButtonBase);export{styles};