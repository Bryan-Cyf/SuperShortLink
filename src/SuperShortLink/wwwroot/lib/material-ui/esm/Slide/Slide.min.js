import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import PropTypes from"prop-types";import*as ReactDOM from"react-dom";import debounce from"../utils/debounce";import{Transition}from"react-transition-group";import{elementAcceptingRef}from"@material-ui/utils";import useForkRef from"../utils/useForkRef";import useTheme from"../styles/useTheme";import{duration}from"../styles/transitions";import{reflow,getTransitionProps}from"../transitions/utils";function getTranslateValue(e,t){var n,r=t.getBoundingClientRect(),o=0,i=0;return(n=t.fakeTransform||(n=window.getComputedStyle(t)).getPropertyValue("-webkit-transform")||n.getPropertyValue("transform"))&&"none"!==n&&"string"==typeof n&&(n=n.split("(")[1].split(")")[0].split(","),o=parseInt(n[4],10),i=parseInt(n[5],10)),"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(o-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-o,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(i-r.top,"px)"):"translateY(-".concat(r.top+r.height-i,"px)")}function setTranslateValue(e,t){e=getTranslateValue(e,t);e&&(t.style.webkitTransform=e,t.style.transform=e)}var defaultTimeout={enter:duration.enteringScreen,exit:duration.leavingScreen},Slide=React.forwardRef(function(e,t){var n=e.children,r=e.direction,o=void 0===r?"down":r,i=e.in,s=e.onEnter,a=e.onEntered,p=e.onEntering,u=e.onExit,c=e.onExited,l=e.onExiting,f=e.style,m=e.timeout,d=void 0===m?defaultTimeout:m,T=e.TransitionComponent,y=void 0===T?Transition:T,r=_objectWithoutProperties(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),g=useTheme(),x=React.useRef(null),m=React.useCallback(function(e){x.current=ReactDOM.findDOMNode(e)},[]),T=useForkRef(n.ref,m),E=useForkRef(T,t),e=function(t){return function(e){t&&(void 0===e?t(x.current):t(x.current,e))}},m=e(function(e,t){setTranslateValue(o,e),reflow(e),s&&s(e,t)}),T=e(function(e,t){var n=getTransitionProps({timeout:d,style:f},{mode:"enter"});e.style.webkitTransition=g.transitions.create("-webkit-transform",_extends({},n,{easing:g.transitions.easing.easeOut})),e.style.transition=g.transitions.create("transform",_extends({},n,{easing:g.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",p&&p(e,t)}),t=e(a),a=e(l),l=e(function(e){var t=getTransitionProps({timeout:d,style:f},{mode:"exit"});e.style.webkitTransition=g.transitions.create("-webkit-transform",_extends({},t,{easing:g.transitions.easing.sharp})),e.style.transition=g.transitions.create("transform",_extends({},t,{easing:g.transitions.easing.sharp})),setTranslateValue(o,e),u&&u(e)}),e=e(function(e){e.style.webkitTransition="",e.style.transition="",c&&c(e)}),b=React.useCallback(function(){x.current&&setTranslateValue(o,x.current)},[o]);return React.useEffect(function(){if(!i&&"down"!==o&&"right"!==o){var e=debounce(function(){x.current&&setTranslateValue(o,x.current)});return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}},[o,i]),React.useEffect(function(){i||b()},[i,b]),React.createElement(y,_extends({nodeRef:x,onEnter:m,onEntered:t,onEntering:T,onExit:l,onExited:e,onExiting:a,appear:!0,in:i,timeout:d},r),function(e,t){return React.cloneElement(n,_extends({ref:E,style:_extends({visibility:"exited"!==e||i?void 0:"hidden"},f,n.props.style)},t))})});"production"!==process.env.NODE_ENV&&(Slide.propTypes={children:elementAcceptingRef,direction:PropTypes.oneOf(["down","left","right","up"]),in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])});export default Slide;export{setTranslateValue};