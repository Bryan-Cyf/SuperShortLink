import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import*as React from"react";import*as ReactDOM from"react-dom";import PropTypes from"prop-types";import clsx from"clsx";import{deepmerge,elementAcceptingRef}from"@material-ui/utils";import{alpha}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useForkRef from"../utils/useForkRef";import useId from"../utils/unstable_useId";import setRef from"../utils/setRef";import useIsFocusVisible from"../utils/useIsFocusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}const styles=e=>({popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:alpha(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:`${round(1.4)}em`,maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:{transformOrigin:"right center",margin:"0 24px ",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementRight:{transformOrigin:"left center",margin:"0 24px",[e.breakpoints.up("sm")]:{margin:"0 14px"}},tooltipPlacementTop:{transformOrigin:"center bottom",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}},tooltipPlacementBottom:{transformOrigin:"center top",margin:"24px 0",[e.breakpoints.up("sm")]:{margin:"14px 0"}}});let hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}const Tooltip=React.forwardRef(function(e,t){const{arrow:o=!1,children:r,classes:n,disableFocusListener:s=!1,disableHoverListener:i=!1,disableTouchListener:p=!1,enterDelay:a=100,enterNextDelay:l=0,enterTouchDelay:c=700,id:m,interactive:u=!1,leaveDelay:d=0,leaveTouchDelay:h=1500,onClose:T,onOpen:f,open:y,placement:g="bottom",PopperComponent:b=Popper,PopperProps:R,title:P,TransitionComponent:v=Grow,TransitionProps:x}=e,w=_objectWithoutPropertiesLoose(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),O=useTheme(),[D,L]=React.useState(),[E,F]=React.useState(null),M=React.useRef(!1),N=React.useRef(),C=React.useRef(),k=React.useRef(),S=React.useRef(),[I,B]=useControlled({controlled:y,default:!1,name:"Tooltip",state:"open"});let _=I;if("production"!==process.env.NODE_ENV){const Z=React.useRef(void 0!==y)["current"];React.useEffect(()=>{D&&D.disabled&&!Z&&""!==P&&"button"===D.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[P,D,Z])}var A=useId(m);React.useEffect(()=>()=>{clearTimeout(N.current),clearTimeout(C.current),clearTimeout(k.current),clearTimeout(S.current)},[]);const W=e=>{clearTimeout(hystersisTimer),hystersisOpen=!0,B(!0),f&&f(e)},j=(o=!0)=>e=>{const t=r.props;"mouseover"===e.type&&t.onMouseOver&&o&&t.onMouseOver(e),M.current&&"touchstart"!==e.type||(D&&D.removeAttribute("title"),clearTimeout(C.current),clearTimeout(k.current),a||hystersisOpen&&l?(e.persist(),C.current=setTimeout(()=>{W(e)},hystersisOpen?l:a)):W(e))},{isFocusVisible:z,onBlurVisible:V,ref:$}=useIsFocusVisible(),[G,H]=React.useState(!1);var q=(o=!0)=>e=>{D||L(e.currentTarget),z(e)&&(H(!0),j()(e));const t=r.props;t.onFocus&&o&&t.onFocus(e)};const U=e=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+d),B(!1),T&&T(e),clearTimeout(N.current),N.current=setTimeout(()=>{M.current=!1},O.transitions.duration.shortest)};var Y=(o=!0)=>e=>{const t=r.props;"blur"===e.type&&(t.onBlur&&o&&t.onBlur(e),G&&(H(!1),V())),"mouseleave"===e.type&&t.onMouseLeave&&e.currentTarget===D&&t.onMouseLeave(e),clearTimeout(C.current),clearTimeout(k.current),e.persist(),k.current=setTimeout(()=>{U(e)},d)};const J=e=>{M.current=!0;const t=r.props;t.onTouchStart&&t.onTouchStart(e)};e=useForkRef(L,t);const K=useForkRef($,e);t=React.useCallback(e=>{setRef(K,ReactDOM.findDOMNode(e))},[K]),e=useForkRef(r.ref,t);""===P&&(_=!1);t=!_&&!i;const Q=_extends({"aria-describedby":_?A:null,title:t&&"string"==typeof P?P:null},w,r.props,{className:clsx(w.className,r.props.className),onTouchStart:J,ref:e}),X={};p||(Q.onTouchStart=e=>{J(e),clearTimeout(k.current),clearTimeout(N.current),clearTimeout(S.current),e.persist(),S.current=setTimeout(()=>{j()(e)},c)},Q.onTouchEnd=e=>{r.props.onTouchEnd&&r.props.onTouchEnd(e),clearTimeout(S.current),clearTimeout(k.current),e.persist(),k.current=setTimeout(()=>{U(e)},h)}),i||(Q.onMouseOver=j(),Q.onMouseLeave=Y(),u&&(X.onMouseOver=j(!1),X.onMouseLeave=Y(!1))),s||(Q.onFocus=q(),Q.onBlur=Y(),u&&(X.onFocus=q(!1),X.onBlur=Y(!1))),"production"!==process.env.NODE_ENV&&r.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.",`Remove this title prop \`${r.props.title}\` or the Tooltip component.`].join("\n"));Y=React.useMemo(()=>deepmerge({popperOptions:{modifiers:{arrow:{enabled:Boolean(E),element:E}}}},R),[E,R]);return React.createElement(React.Fragment,null,React.cloneElement(r,Q),React.createElement(b,_extends({className:clsx(n.popper,u&&n.popperInteractive,o&&n.popperArrow),placement:g,anchorEl:D,open:!!D&&_,id:Q["aria-describedby"],transition:!0},X,Y),({placement:e,TransitionProps:t})=>React.createElement(v,_extends({timeout:O.transitions.duration.shorter},t,x),React.createElement("div",{className:clsx(n.tooltip,n[`tooltipPlacement${capitalize(e.split("-")[0])}`],M.current&&n.touch,o&&n.tooltipArrow)},P,o?React.createElement("span",{className:n.arrow,ref:F}):null))))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object,className:PropTypes.string,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterNextDelay:PropTypes.number,enterTouchDelay:PropTypes.number,id:PropTypes.string,interactive:PropTypes.bool,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:PropTypes.elementType,PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip",flip:!1})(Tooltip);export{styles,testReset};